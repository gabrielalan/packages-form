<div class="packages-form">
  <p class="text-dark">
    Add packages to your shipment.
    You can add up to <b>5</b> packages and the weight of all packages combined cannot be more than <b>25kg.</b>
  </p>

  <form [formGroup]="form" novalidate>

    <div class="row">
      <div formArrayName="packages" class="col-12 col-lg-9">

        <div *ngFor="let package of packages.controls; let i = index;" [formGroupName]="i" class="package-ct">
          <h3><span>Package #{{i + 1}}</span></h3>

          <div class="form-row">
            <app-form-group class="col-12 col-lg-4" [group]="package" field="name">
              <label for="name">Name</label>
              <input type="text" class="form-control form-control-lg" id="name" placeholder="Name" formControlName="name" />
            </app-form-group>

            <app-form-group class="col-12 col-sm-6 col-md-6 col-lg-4" [group]="package" field="weight">
              <label for="weight">Weight</label>
              <div class="input-group">
                <input type="text" class="form-control form-control-lg" id="weight" placeholder="10" formControlName="weight" />
                <span class="input-group-addon">kg</span>
              </div>
            </app-form-group>

            <app-form-group class="col-12 col-sm-6 col-md-6 col-lg-4" [group]="package" field="value">
              <label for="value">Value</label>
              <app-currency-value id="value" [currencies]="currencies" formControlName="value"></app-currency-value>
            </app-form-group>
          </div>

          <div class="row justify-content-center">
            <button class="btn btn-lg btn-danger"
                    [disabled]="packages.length <= 1"
                    (click)="removePackage(i)">Remove package</button>
          </div>

        </div>
      </div>

      <div class="col-12 col-lg-3">
        <div class="app-card packages-summary">
          <dl>
            <dt>Number of packages</dt>
            <dd>{{ packages.length }}</dd>
            <dt>Total weight</dt>
            <dd>25kg</dd>
            <dt>Total value (EUR)</dt>
            <dd>â‚¬ {{total}}</dd>
          </dl>
        </div>
      </div>
    </div>

    <button (click)="addPackage()" [disabled]="packages.length >= 5" class="btn btn-lg btn-success">Add one more package</button>
    <button class="btn btn-lg btn-primary">Continue</button>
  </form>

  <p>{{form.value | json}}</p>
  <p>{{form.status | json}}</p>
</div>
